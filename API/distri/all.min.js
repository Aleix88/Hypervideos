"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var HTMLManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createElement",value:function(e,t,n){var r=document.createElement(e);return Array.isArray(t)&&t.length>0&&t.forEach(function(e){r.classList.add(e)}),null!=n&&(r.id=n),r}},{key:"getShadowElementByID",value:function(e,t){return document.getElementById(e).shadowRoot.getElementById(t)}},{key:"getShadowElementByClassName",value:function(e,t){return document.getElementById(e).shadowRoot.querySelector("."+t)}},{key:"hexToRGBA",value:function(e,t){return"rgba("+parseInt(e.slice(1,3),16)+", "+parseInt(e.slice(3,5),16)+", "+parseInt(e.slice(5,7),16)+", "+t+")"}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hypervideo=function(){function e(t,n,r){_classCallCheck(this,e),this.videoURL=t,this.videoType=n,this.containerID=r}return _createClass(e,[{key:"isDOMLoaded",value:function(){return null!=document&&("interactive"===document.readyState||"complete"===document.readyState)}},{key:"setupHypervideo",value:function(e){this.__addGlobalStyle(),document.getElementById(this.containerID).appendChild(this.getStyle()),this.isDOMLoaded()||console.log("Error: Can't setup an hypervideo if DOM is not loaded."),this.tagsJSON=e;var t=(new VideoManagerFactory).create(this.videoType,this.containerID);new HypervideoControlls(this.videoURL,this.videoType,this.containerID,t).createSkeleton(),new TagsController(this.containerID,t).addTags(e)}},{key:"__addGlobalStyle",value:function(){var e=document.createElement("style");e.textContent="\n            .hypervideo:-moz-full-screen {\n                width: 100%;\n                height: 100%;\n            }\n            \n            .hypervideo:-webkit-full-screen {\n                width: 100%;\n                height: 100%;\n            }\n            \n            .hypervideo:fullscreen {\n                width: 100%;\n                height: 100%;\n            }\n        ",document.querySelector("head").appendChild(e)}},{key:"getStyle",value:function(){var e=document.createElement("style");return e.textContent='\n\n        video {\n            width: 100%;\n            height: 100%;\n            background: black;\n        }\n        \n        button {\n            cursor: pointer;\n        }\n        \n        .youtube-frame {\n            width: 100%;\n            height: 100%;\n        }\n        \n        .hypervideo-container {\n            position: relative;\n            width: 100%;\n            height: 100%;\n            user-drag: none; \n            user-select: none;\n            -moz-user-select: none;\n            -webkit-user-drag: none;\n            -webkit-user-select: none;\n            -ms-user-select: none;\n        }\n\n        .hypervideo-container-fullscreen {\n\n        }\n        \n        /* Top control bar */\n        .top-controller {\n            background-color: rgba(0, 150, 0, 0.37);;\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n        }\n        \n\n        /* Tags */\n\n        x-tag-button {\n            pointer-events: all;\n            position: absolute;\n            width: 5%;\n            top: 50px;\n            left: 50px;\n            display: block;\n            visibility: hidden;\n        }\n\n        .tags-container {\n            pointer-events: none;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        /*  Bottom control bar  */\n        .bottom-controller {\n            display: flex;\n            opacity: 0;\n            justify-content: flex-start;\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background: rgb(2,0,36);\n            background: linear-gradient(0deg, rgba(2,0,36,1) 30%, rgba(0,212,255,0) 100%);\n            padding: 4px;\n            transition: opacity 0.2s;\n        }\n\n        .hypervideo-container:hover > .bottom-controller,\n        .hypervideo-container:focus > .bottom-controller {\n            opacity: 1;\n        }\n        \n        .control-button-container {\n            background: rgba(0,0,0,0);\n            height: 2em;\n            padding-left: 0.4em;\n            padding-right: 0.4em;\n            border: none;\n            cursor: pointer;\n        }\n        \n        .control-button-container:not(:last-child) {\n            margin-right: 2px;\n        }\n        \n        .control-button {\n            color: white;  \n            border: none;\n            outline: none;\n            background-color: rgba(0,0,0,0);\n            height: 100%; \n            width: 2em;\n            margin: auto;\n            padding: 0;\n        }\n        \n        .control-button:hover,\n        .control-button:focus {\n            color: rgb(97, 87, 245);\n        }\n        \n        .progress-container {\n            flex-grow: 1;\n            margin-right: 2px;\n            height: 3px;\n            background: rgba(210,210,210,0.68);\n            align-self: center;\n            position: relative;\n            cursor: pointer; \n            transition: height 0.2s;\n        }        \n\n        .progress-container:focus,\n        .progress-container:hover {\n            height: 5px;\n        }\n\n        x-pause-screen {\n            width: 100%;\n            height: 100%;\n            margin: auto;\n            position: absolute;\n            top: 0;\n            left: 0;\n        }\n\n        \n        /* ICONS */\n        \n        .gg-play-button {\n            box-sizing: border-box;\n            position: relative;\n            display: block;\n            transform: scale(var(--ggs,1));\n            width: 22px;\n            height: 22px;\n            margin: auto; /*Aquesta linia s\'ha d\'afegir*/\n        }\n        .gg-play-button::before {\n            content: "";\n            display: block;\n            box-sizing: border-box;\n            position: absolute;\n            width: 0;\n            height: 10px;\n            border-top: 5px solid transparent;\n            border-bottom: 5px solid transparent;\n            border-left: 6px solid;\n            top: 6px;\n            left: 9px;\n        }\n        \n        .gg-repeat {\n            box-sizing: border-box;\n            position: relative;\n            display: block;\n            transform: scale(var(--ggs,1));\n            box-shadow:\n                -2px -2px 0 0,\n                2px 2px 0 0;\n            width: 14px;\n            height: 6px;\n            margin: auto;\n        }\n        .gg-repeat::after,\n        .gg-repeat::before {\n            content: "";\n            display: block;\n            box-sizing: border-box;\n            position: absolute;\n            width: 0;\n            height: 0;\n            border-top: 3px solid transparent;\n            border-bottom: 3px solid transparent;\n        }\n        .gg-repeat::before {\n            border-left: 5px solid;\n            top: -4px;\n            right: 0;\n        }\n        .gg-repeat::after {\n            border-right: 5px solid;\n            bottom: -4px;\n            left: 0;\n        }\n        .gg-maximize {\n            box-sizing: border-box;\n            position: relative;\n            display: block;\n            transform: scale(var(--ggs,1));\n            width: 14px;\n            height: 14px;\n            box-shadow:\n                -6px -6px 0 -4px,\n                6px 6px 0 -4px,\n                6px -6px 0 -4px,\n                -6px 6px 0 -4px;\n            margin: auto;\n        }\n        \n        .gg-minimize {\n            box-sizing: border-box;\n            position: relative;\n            display: block;\n            transform: scale(var(--ggs,1));\n            width: 4px;\n            height: 4px;\n            box-shadow:\n                -8px -4px 0 -1px,\n                -6px -4px 0 -1px,\n                8px 4px 0 -1px,\n                6px 4px 0 -1px,\n                8px -4px 0 -1px,\n                6px -4px 0 -1px,\n                -8px 4px 0 -1px,\n                -6px 4px 0 -1px;\n            margin: auto;\n        }\n        .gg-minimize::after,\n        .gg-minimize::before {\n            content: "";\n            display: block;\n            box-sizing: border-box;\n            position: absolute;\n            width: 2px;\n            height: 18px;\n            border-top: 6px solid;\n            border-bottom: 6px solid;\n            box-shadow: 18px 0 0 -2px;\n            top: -7px;\n        }\n        .gg-minimize::after {\n            left: -3px;\n        }\n        .gg-minimize::before {\n            right: -3px;\n        }\n        \n        .gg-play-pause {\n            box-sizing: border-box;\n            position: relative;\n            display: block;\n            transform: scale(var(--ggs,1));\n            width: 8px;\n            height: 10px;\n            border-left: 3px solid;\n            border-right: 3px solid;\n            margin: auto;\n        }\n        \n        ',e}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}_defineProperty(Hypervideo,"YOUTUBE_TYPE","YOUTUBE"),_defineProperty(Hypervideo,"VIDEO_TYPE","VIDEO");var HypervideoControlls=function(){function e(t,n,r,o){_classCallCheck(this,e),this.videoLength=null,this.videoSRC=t,this.videoType=n,this.containerID=r,this.videoManager=o,this.htmlManager=new HTMLManager,this.videoManager.videoStateChanged=this.__videoStateChanged.bind(this)}return _createClass(e,[{key:"__videoStateChanged",value:function(e,t){var n=document.getElementById(this.containerID).querySelector("x-progress-bar"),r=document.getElementById(this.containerID).querySelector("x-pause-screen"),o=document.getElementById(this.containerID).querySelector("x-volume-bar");switch(e){case VideoManager.PLAYING:r.hide(),this.changeButtonIcon("control-play-button","gg-play-pause");break;case VideoManager.PAUSED:r.show(),this.changeButtonIcon("control-play-button","gg-play-button");break;case VideoManager.LOADED:if(o.setVolume(50),this.videoManager.setVolume(.5),this.videoLength=t.duration,null===n)break;n.setMaxLength(t.duration);break;case VideoManager.ENTER_FULL_SCREEN:this.changeButtonIcon("control-full-screen-button","gg-minimize");break;case VideoManager.EXIT_FULL_SCREEN:this.changeButtonIcon("control-full-screen-button","gg-maximize")}}},{key:"restartVideo",value:function(){document.getElementById(this.containerID).querySelector("x-progress-bar").setCurrentLength(0),this.videoManager.restartVideo()}},{key:"toggleFullScreen",value:function(){this.videoManager.toggleFullScreen()}},{key:"playButtonClicked",value:function(){console.log("Click play"),this.videoManager.isVideoPlaying()?this.videoManager.pause():this.videoManager.play()}},{key:"changeButtonIcon",value:function(e,t){var n=document.getElementById(this.containerID).querySelector("."+e);if(!(n.length<=0)){var r=n.getElementsByTagName("i");r.length<=0||(r[0].className=t)}}},{key:"createSkeleton",value:function(){var e=document.getElementById(this.containerID),t=this.htmlManager.createElement("div",["hypervideo-container"]),n=this.htmlManager.createElement("div",["tags-container"]);e.appendChild(t),this.addVideoElement(t),this.videoType!=Hypervideo.YOUTUBE_TYPE&&this.addTopBarControlls(t),this.__addPauseScreen(t),t.appendChild(n),this.addBottomBarControlls(t)}},{key:"addVideoTag",value:function(e){this.videoElementID="video-"+this.containerID;var t=this.htmlManager.createElement("video","",this.videoElementID);t.src=this.videoSRC,e.appendChild(t),this.videoManager.setupVideo()}},{key:"addVideoFromYotube",value:function(e){this.videoElementID="video-"+this.containerID;var t=this.htmlManager.createElement("div",["youtube-frame"]);t.id=this.videoElementID,e.appendChild(t),this.videoManager.addYoutubeScript(this.videoElementID)}},{key:"addVideoElement",value:function(e){switch(this.videoType){case Hypervideo.YOUTUBE_TYPE:this.addVideoFromYotube(e);break;default:this.addVideoTag(e)}}},{key:"addTopBarControlls",value:function(e){var t=this.htmlManager.createElement("div",["top-controller"]);e.appendChild(t)}},{key:"__addPauseScreen",value:function(e){var t=this.htmlManager.createElement("x-pause-screen"),n=this;t.didClick=function(){n.videoManager.isVideoPlaying()?n.videoManager.pause():n.videoManager.play()},e.appendChild(t)}},{key:"addBottomBarControlls",value:function(e){var t=this.htmlManager.createElement("div",["bottom-controller"]);e.appendChild(t);var n=this.createControlButton("control-play-button","gg-play-button",this.playButtonClicked),r=this.createControlButton("control-repeat-button","gg-repeat",this.restartVideo),o=this.createControlButton("control-full-screen-button","gg-maximize",this.toggleFullScreen),i=this.createProgressBar(),a=this.createVolumeBar();t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(i),t.appendChild(a)}},{key:"createControlButton",value:function(e,t,n){var r=this.htmlManager.createElement("div",["control-button-container"]),o=this.htmlManager.createElement("button",["control-button",e]),i=this.htmlManager.createElement("i",[t]);return r.appendChild(o),o.appendChild(i),null!=n&&r.addEventListener("click",n.bind(this)),r}},{key:"createProgressBar",value:function(){var e=this.htmlManager.createElement("x-progress-bar",["progress-container"]);return e.progressBarChanged=this.__progressBarChanged.bind(this),null!==this.videoLength&&e.setMaxLength(this.videoLength),this.__setupProgressBarTimer(e),e}},{key:"__setupProgressBarTimer",value:function(e){var t=new Observer(function(){e.increment()});this.videoManager.addObserver(t)}},{key:"__progressBarChanged",value:function(e){this.videoManager.loadProgress(e)}},{key:"createVolumeBar",value:function(){var e=this.htmlManager.createElement("x-volume-bar",["volume-bar"]);return e.volumeChanged=this.__volumeChanged.bind(this),e}},{key:"__volumeChanged",value:function(e){this.videoManager.setVolume(e/100)}}]),e}();function includeJs(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.onreadystatechange=t,n.onload=t,document.body.appendChild(n)}var files=["../../API/src/HTMLManager.js","../../API/src/HypervideoControlls.js","../../API/src/Hypervideo.js"],scriptsLoaded=0;function importHypervideoAPI(e){files.forEach(function(t){includeJs(t,function(){++scriptsLoaded===files.length&&e()})})}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Observer=function(){function e(t){_classCallCheck(this,e),this.onChange=t}return _createClass(e,[{key:"update",value:function(e){this.onChange(e)}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Subject=function(){function e(){_classCallCheck(this,e),this.observers=[]}return _createClass(e,[{key:"addObserver",value:function(e){this.observers.push(e)}},{key:"removeObserver",value:function(e){var t=this.observers.findIndex(function(t){return e===t});-1!==t&&(this.observers=this.observers.slice(t,1))}},{key:"notify",value:function(e){this.observers.forEach(function(t){return t.update(e)})}}]),e}();function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var TagsController=function(){function e(t,n){_classCallCheck(this,e),this.containerID=t,this.videoManager=n,this.tagsContainer=document.getElementById(t).querySelector(".tags-container")}return _createClass(e,[{key:"addTags",value:function(e){try{var t,n=_createForOfIteratorHelper(JSON.parse(e).tags);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.__addTagButton(r)}}catch(e){n.e(e)}finally{n.f()}}catch(e){throw"Error: Not valid JSON"}}},{key:"__addTagButton",value:function(e){var t=document.createElement("x-tag-button");this.tagsContainer.appendChild(t);var n=new Observer(function(n){var r=e.timeConfig.timestamp,o=e.timeConfig.duration,i=n>=r&&n<r+o;t.isVisible=i});this.videoManager.addObserver(n),t.hexColor=e.color?e.color:"#FFFFFF",t.position=e.position}}]),e}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VideoManager=function(e){_inherits(n,Subject);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this)).containerID=e,r.videoStateChanged=null,r.isFullScreen=!1,(this instanceof n?this.constructor:void 0)===n)throw new TypeError("Cannot construct VideoManager instances directly");return r.__exitFullScreenEventListeners(),r}return _createClass(n,[{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"restartVideo",value:function(){}},{key:"isVideoPlaying",value:function(){}},{key:"loadProgress",value:function(e){}},{key:"setVolume",value:function(e){}},{key:"__exitFullScreenEventListeners",value:function(){document.addEventListener("fullscreenchange",this._exitFSHandler.bind(this),!1),document.addEventListener("mozfullscreenchange",this._exitFSHandler.bind(this),!1),document.addEventListener("MSFullscreenChange",this._exitFSHandler.bind(this),!1),document.addEventListener("webkitfullscreenchange",this._exitFSHandler.bind(this),!1)}},{key:"_exitFSHandler",value:function(e){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(console.log("Exit full screen!"),this.isFullScreen=!1,this.videoStateChanged(n.EXIT_FULL_SCREEN))}},{key:"_enterFSHandler",value:function(){console.log("Enter full screen!"),this.isFullScreen=!0,this.videoStateChanged(n.ENTER_FULL_SCREEN)}},{key:"toggleFullScreen",value:function(){var e=document.getElementById(this.containerID);this.isFullScreen?this.requestExitFullScreen(e):this.requestFullScreen(e)}},{key:"requestFullScreen",value:function(e){e.requestFullscreen?(e.requestFullscreen(),this._enterFSHandler()):e.mozRequestFullScreen?(e.mozRequestFullScreen(),this._enterFSHandler()):e.webkitRequestFullscreen?(e.webkitRequestFullscreen(),this._enterFSHandler()):e.msRequestFullscreen&&(e.msRequestFullscreen(),this._enterFSHandler())}},{key:"requestExitFullScreen",value:function(e){document.exitFullscreen?(document.exitFullscreen(),this._exitFSHandler()):document.mozCancelFullScreen?(document.mozCancelFullScreen(),this._exitFSHandler()):document.webkitExitFullscreen&&(document.webkitExitFullscreen(),this._exitFSHandler())}},{key:"currentTime",get:function(){return 0}}]),n}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}_defineProperty(VideoManager,"PLAYING",0),_defineProperty(VideoManager,"PAUSED",1),_defineProperty(VideoManager,"LOADED",2),_defineProperty(VideoManager,"ENTER_FULL_SCREEN",3),_defineProperty(VideoManager,"EXIT_FULL_SCREEN",4);var VideoManagerFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"create",value:function(e,t){switch(e){case Hypervideo.YOUTUBE_TYPE:return new YoutubeVideoManager(t);default:return new VideoTagManager(t)}}}]),e}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var VideoTagManager=function(e){_inherits(n,VideoManager);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).videoTimer=new VideoTimer(r.__timeHandler.bind(_assertThisInitialized(r))),r}return _createClass(n,[{key:"play",value:function(){document.getElementById(this.containerID).querySelector("video").play()}},{key:"pause",value:function(){document.getElementById(this.containerID).querySelector("video").pause()}},{key:"restartVideo",value:function(){document.getElementById(this.containerID).querySelector("video").currentTime=0}},{key:"isVideoPlaying",value:function(){return!document.getElementById(this.containerID).querySelector("video").paused}},{key:"loadProgress",value:function(e){var t=document.getElementById(this.containerID).querySelector("video");t.currentTime=t.duration*e,this.videoTimer.loadOffset(t.currentTime-Math.floor(t.currentTime)),this.notify(t.currentTime)}},{key:"setupVideo",value:function(){var e=document.getElementById(this.containerID).querySelector("video");e.addEventListener("pause",this.__videoIsPaused.bind(this)),e.addEventListener("play",this.__videoIsPlaying.bind(this)),e.addEventListener("loadeddata",this.__videoLoaded.bind(this))}},{key:"__videoIsPlaying",value:function(){this.videoStateChanged(VideoManager.PLAYING),this.videoTimer.play()}},{key:"__videoIsPaused",value:function(){this.videoStateChanged(VideoManager.PAUSED),this.videoTimer.pause()}},{key:"__videoLoaded",value:function(){var e=document.getElementById(this.containerID).querySelector("video");this.videoStateChanged(VideoManager.LOADED,{duration:e.duration})}},{key:"__timeHandler",value:function(){var e=document.getElementById(this.containerID).querySelector("video");this.notify(e.currentTime)}},{key:"setVolume",value:function(e){e=(e=e>1?1:e)<0?0:e,this.htmlManager.getShadowElementByID(this.containerID,this.videoElementID).volume=e}},{key:"setVolume",value:function(e){e=(e=e>1?1:e)<0?0:e,document.getElementById(this.containerID).querySelector("video").volume=e}},{key:"currentTime",get:function(){return document.getElementById(this.containerID).querySelector("video").currentTime}}]),n}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var VideoTimer=function(){function e(t){_classCallCheck(this,e),this.loopCounter=0,this.timeHandler=t}return _createClass(e,[{key:"play",value:function(){this.timer=setInterval(this.__handleTime.bind(this),e.LOOP_TIME)}},{key:"pause",value:function(){clearInterval(this.timer)}},{key:"loadOffset",value:function(t){this.loopCounter=parseInt(t/e.LOOP_TIME)}},{key:"__handleTime",value:function(){this.loopCounter++,this.loopCounter>=10&&(this.timeHandler(),this.loopCounter=0)}}],[{key:"LOOP_TIME",get:function(){return 100}}]),e}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var XPauseScreen=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this)).htmlManager=new HTMLManager,e.didClick=null;var r=e.attachShadow({mode:"open"}),o=e.htmlManager.createElement("div",["pause-container"]);return o.addEventListener("click",e.__onClick.bind(_assertThisInitialized(e))),r.appendChild(o),r.appendChild(e.__getStyle()),e}return _createClass(n,[{key:"hide",value:function(){this.shadowRoot.querySelector(".pause-container").classList.add("hide")}},{key:"show",value:function(){this.shadowRoot.querySelector(".pause-container").classList.remove("hide")}},{key:"__onClick",value:function(){this.didClick()}},{key:"__addPlayIcon",value:function(e){var t=this.htmlManager.createElement("img",["play-image"]);t.src="./../../API/assets/play-button.svg",e.appendChild(t)}},{key:"__getStyle",value:function(){var e=document.createElement("style");return e.textContent="\n\n            .pause-container {\n                width: 100%;\n                height: 100%;\n                background: rgba(0,0,0,0.1);\n                cursor: pointer;\n                display: flex;\n                margin: 0;\n            }\n\n            .hide {\n                opacity: 0;\n            }\n\n            .play-image {\n                width: 100px;\n                height: 100px;\n                margin: auto;\n            }\n        ",e}}]),n}(_wrapNativeSuper(HTMLElement));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}customElements.define("x-pause-screen",XPauseScreen);var XProgressBar=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this)).isMoving=!1,e.htmlManager=new HTMLManager,e.maxLength=100,e.currentLength=0,e.currentProgress=0,e.progressBarChanged=null;var r=e.attachShadow({mode:"open"});e.__setupEventsListeners();var o=e.htmlManager.createElement("div",["progress-bar"]);return r.appendChild(e.getStyle()),r.appendChild(o),e.addMarkerAt(10),e.addMarkerAt(40),e}return _createClass(n,[{key:"addMarkerAt",value:function(e){var t=this.htmlManager.createElement("div",["progress-bar-marker"]),n=this.convertLengthToProgress(e);this.shadowRoot.appendChild(t),t.style.left=n+"%"}},{key:"__setupEventsListeners",value:function(){this.onmousedown=this.__mouseDown.bind(this),document.addEventListener("mouseup",this.__mouseUp.bind(this)),document.addEventListener("mouseleave",this.__mouseLeave.bind(this)),document.addEventListener("mousemove",this.__mouseMoving.bind(this))}},{key:"__recalculatePosition",value:function(e){var t=this.getBoundingClientRect(),n=(e-t.left)/t.width;n=(n=n>1?1:n)<0?0:n,this.setCurrentLength(n*this.maxLength)}},{key:"__mouseLeave",value:function(e){this.isMoving&&(this.isMoving=!1,this.__recalculatePosition(e.clientX),this.progressBarChanged(this.currentProgress))}},{key:"__mouseUp",value:function(e){this.isMoving&&(this.isMoving=!1,this.__recalculatePosition(e.clientX),this.progressBarChanged(this.currentProgress))}},{key:"__mouseMoving",value:function(e){this.isMoving&&this.__recalculatePosition(e.clientX)}},{key:"__mouseDown",value:function(e){this.isMoving=!0,this.__recalculatePosition(e.clientX)}},{key:"convertLengthToProgress",value:function(e){return e/this.maxLength*100}},{key:"setCurrentLength",value:function(e){this.currentLength=e,this.currentLength=this.currentLength>this.maxLength?this.maxLength:this.currentLength,this.currentLength=this.currentLength<0?0:this.currentLength;var t=this.shadowRoot.querySelector(".progress-bar"),n=this.convertLengthToProgress(e);this.currentProgress=n/100,t.style.width=n+"%"}},{key:"setMaxLength",value:function(e){this.maxLength=e}},{key:"increment",value:function(e){var t=1;null==e||isNaN(e)||(t=e),this.setCurrentLength(this.currentLength+t)}},{key:"getStyle",value:function(){var e=document.createElement("style");return e.textContent="\n            .progress-bar {\n                background: rgb(97, 87, 245);\n                position: absolute;\n                height: 100%;\n                width: 0%;\n            }\n\n            .progress-bar-marker {\n                width: 7px;\n                height: 100%;\n                top: 0;\n                background: yellow;\n                position: absolute;\n            }\n        ",e}}]),n}(_wrapNativeSuper(HTMLElement));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}_defineProperty(XProgressBar,"POSITION_SET","POSITION_SET"),customElements.define("x-progress-bar",XProgressBar);var XTagButton=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this)).htmlManager=new HTMLManager,e.attachShadow({mode:"open"}),e.oldIsVisible=!1;var r=e.htmlManager.createElement("div",["tag-circle-container"]),o=e.htmlManager.createElement("a",["tag-anchor"]),i=e.htmlManager.createElement("div",["aspect-ratio-div"]);return e.shadowRoot.appendChild(r),e.shadowRoot.appendChild(o),e.shadowRoot.appendChild(i),e.shadowRoot.appendChild(e.getStyle()),e.__setupEventListeners(o),e}return _createClass(n,[{key:"__setupEventListeners",value:function(e){e.addEventListener("mousedown",this.__onMouseDown.bind(this)),e.addEventListener("click",this.__onClick.bind(this)),e.addEventListener("mouseenter",this.__onHover.bind(this)),e.addEventListener("mouseleave",this.__onMouseLeave.bind(this))}},{key:"__onClick",value:function(){console.log("Click")}},{key:"__onHover",value:function(){console.log("Hover"),this.__animateFocusScale()}},{key:"__onMouseDown",value:function(){console.log("Hold")}},{key:"__onMouseLeave",value:function(){this.__animateDefaultScale()}},{key:"__animateDefaultScale",value:function(){console.log("Default scale");var e=this.shadowRoot.querySelector(".tag-anchor");e.classList.add("defaultScale"),e.classList.remove("focusScale"),e.classList.remove("appear")}},{key:"__animateFocusScale",value:function(){var e=this.shadowRoot.querySelector(".tag-anchor");e.classList.add("focusScale"),e.classList.remove("defaultScale"),e.classList.remove("appear")}},{key:"__animateAppear",value:function(){this.style.visibility="visible";var e=this.shadowRoot.querySelector(".tag-circle-container"),t=this.shadowRoot.querySelector(".tag-anchor");t.classList.remove("disappear"),e.classList.remove("effectDissapear"),t.classList.add("appear"),e.classList.add("effectAppear")}},{key:"__animateDisppear",value:function(){var e=this,t=setInterval(function(){e.style.visibility="hidden",clearTimeout(t)},350),n=this.shadowRoot.querySelector(".tag-circle-container"),r=this.shadowRoot.querySelector(".tag-anchor");r.classList.remove("appear"),n.classList.remove("effectAppear"),r.classList.add("disappear"),n.classList.add("effectDissapear")}},{key:"getStyle",value:function(){var e=document.createElement("style");return e.textContent="\n\n            .aspect-ratio-div {\n                margin-top: 100%;\n            }\n\n            .tag-circle-container {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                border-radius: 50%;\n                opacity: 0;\n\n                -webkit-transition: opacity 0.3s;\n                -moz-transition: opacity 0.3s;\n                -ms-transition: opacity 0.3s;\n                -o-transition: opacity 0.3s;\n                transition: opacity 0.3s;\n\n                -webkit-animation: crescendo 1.5s alternate infinite ease-in;\n                -moz-animation: crescendo 1.5s alternate infinite ease-in;\n                -ms-animation: crescendo 1.5s alternate infinite ease-in;\n                -o-animation: crescendo 1.5s alternate infinite ease-in;\n                animation: crescendo 1.5s alternate infinite ease-in;\n\n            }\n\n            .tag-circle-container.effectAppear {\n                opacity: 1;\n            }\n\n            .tag-circle-container.effectDissapear {\n                opacity: 0;\n            }\n\n\n            @keyframes crescendo {\n                0% {transform: scale(1);}\n                100% {transform: scale(1.5);}\n            }\n\n            .tag-anchor {\n                display:block;\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                border-radius: 50%;\n                cursor: pointer;\n                transform: scale(0);\n                -webkit-transition: transform 0.3s;\n                -moz-transition: transform 0.3s;\n                -ms-transition: transform 0.3s;\n                -o-transition: transform 0.3s;\n                transition: transform 0.3s;\n            }\n\n            .tag-anchor.defaultScale {\n                transform: scale(1);\n            }\n\n            .tag-anchor.focusScale {\n                transform: scale(1.5);\n            }\n\n            .tag-anchor.disappear {\n                transform: scale(0);\n            }\n\n            .tag-anchor.appear {\n                transform: scale(1);\n            }\n        ",e}},{key:"hexColor",set:function(e){var t=this.shadowRoot.querySelector(".tag-anchor"),n=this.shadowRoot.querySelector(".tag-circle-container"),r=this.htmlManager.hexToRGBA(e,.5);t.style.background=e,n.style.background=r},get:function(){return this.hexColor}},{key:"position",set:function(e){this.style.top=e.x+"%",this.style.left=e.y+"%",this.style.transform="translate(-50%, -50%)"}},{key:"isVisible",set:function(e){this.oldIsVisible!==e&&(!0===e?this.__animateAppear():!1===e&&this.__animateDisppear(),this.oldIsVisible=e)}}]),n}(_wrapNativeSuper(HTMLElement));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}customElements.define("x-tag-button",XTagButton);var XVolumeBar=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this)).htmlManager=new HTMLManager,e.maxVolume=100,e.volume=0,e.isVolMoving=!1,e.volumeChanged=function(){};var r=e.attachShadow({mode:"open"}),o=e.htmlManager.createElement("div",["volume-bar-container"]),i=e.createVolumeButton(),a=e.htmlManager.createElement("div",["volume-bar-rect"]),s=e.htmlManager.createElement("div",["volume-bar-level"]);return o.appendChild(i),o.appendChild(a),a.appendChild(s),r.appendChild(o),r.appendChild(e.getStyle()),e.__setupEventsListeners(a,o),e}return _createClass(n,[{key:"createVolumeButton",value:function(){var e=this.htmlManager.createElement("div",["volume-icon-container"]),t=this.htmlManager.createElement("button",["volume-button"]),n=this.htmlManager.createElement("i",["gg-volume"]);return e.appendChild(t),t.appendChild(n),e}},{key:"__setupEventsListeners",value:function(e,t){e.onmousedown=this.__mouseDown.bind(this),t.onmouseenter=this.__mouseEnter.bind(this),t.onmouseleave=this.__mouseLeaveElement.bind(this),document.addEventListener("mouseup",this.__mouseUp.bind(this)),document.addEventListener("mouseleave",this.__mouseLeaveDocument.bind(this)),document.addEventListener("mousemove",this.__mouseMoving.bind(this))}},{key:"__mouseEnter",value:function(){this.shadowRoot.querySelector(".volume-bar-rect").classList.add("volume-bar-rect-focus")}},{key:"__mouseLeaveDocument",value:function(){this.isVolMoving=!1}},{key:"__mouseLeaveElement",value:function(){this.isVolMoving||this.shadowRoot.querySelector(".volume-bar-rect").classList.remove("volume-bar-rect-focus")}},{key:"__mouseUp",value:function(){this.isVolMoving=!1}},{key:"__mouseMoving",value:function(e){this.isVolMoving&&this.__calculateVolumePosition(e.clientX)}},{key:"__mouseDown",value:function(e){this.isVolMoving=!0,this.__calculateVolumePosition(e.clientX)}},{key:"__calculateVolumePosition",value:function(e){var t=this.shadowRoot.querySelector(".volume-bar-rect").getBoundingClientRect(),n=(e-t.left)/t.width;this.setVolume(n*this.maxVolume)}},{key:"setVolume",value:function(e){e=(e=e<0?0:e)>100?100:e,this.volume=e,this.volumeChanged(e),this.shadowRoot.querySelector(".volume-bar-level").style.width=e+"%"}},{key:"getStyle",value:function(){var e=document.createElement("style");return e.textContent='\n            .volume-bar-container {\n                margin-right: 0.5px;\n                cursor: pointer;\n                display: flex;\n            }\n\n            .volume-bar-container:hover,\n            .volume-bar-container:focus {\n                color: rgb(97, 87, 245);\n            }\n            \n            .volume-bar-rect {\n                display: none;\n                height: 3px;\n                background:white;\n                width: 50px;\n                margin: auto;\n                cursor: pointer;\n                transition: height 0.2s;\n            }\n\n            .volume-bar-rect:hover,\n            .volume-bar-rect:focus {\n                height: 7px;\n            }\n            \n             .volume-bar-rect-focus {\n                display: block;\n            }\n\n            .volume-bar-level {\n                height: 100%;\n                width: 0%;\n                background: rgb(97, 87, 245);\n            }\n            \n            .volume-icon-container {\n                background: rgba(0,0,0,0);\n                height: 2em;\n                padding-left: 0.4em;\n                padding-right: 0.4em;\n                border: none;\n                cursor: pointer;\n            }\n            \n            .volume-button {\n                color: white;  \n                border: none;\n                outline: none;\n                background-color: rgba(0,0,0,0);\n                height: 100%; \n                width: 2em;\n                margin: auto;\n                padding: 0;\n                cursor: pointer;\n            }\n            \n            .volume-button:hover,\n            .volume-button:focus {\n                color: rgb(97, 87, 245);\n            }\n\n            /* ICON */\n            /* ICON */\n            .gg-volume {\n                box-sizing: border-box;\n                position: relative;\n                display: block;\n                transform: scale(var(--ggs,1));\n                width: 8px;\n                height: 8px;\n                border: 2px solid;\n                border-right: 0;\n                -webkit-perspective: 12px;\n                perspective: 12px;\n                border-top-left-radius: 4px;\n                border-bottom-left-radius: 4px;\n                margin: 0;\n            }\n            .gg-volume::after,\n            .gg-volume::before {\n                content: "";\n                display: block;\n                box-sizing: border-box;\n                position: absolute;\n            }\n            .gg-volume::before {\n                left: 2px;\n                transform: rotateY(-90deg);\n                width: 10px;\n                height: 10px;\n                border: 2px solid;\n                border-left: 0;\n                top: -3px;\n            }\n            .gg-volume::after {\n                width: 8px;\n                height: 16px;\n                border: 6px double;\n                border-left: 0;\n                border-top-right-radius: 100px;\n                border-bottom-right-radius: 100px;\n                right: -14px;\n                top: -6px;\n            }    \n        ',e}}]),n}(_wrapNativeSuper(HTMLElement));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}customElements.define("x-volume-bar",XVolumeBar);var YoutubeVideoManager=function(e){_inherits(n,VideoManager);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).player=null,r.videoTimer=new VideoTimer(r.__timeHandler.bind(_assertThisInitialized(r))),r}return _createClass(n,[{key:"play",value:function(){null!==this.player&&this.player.playVideo()}},{key:"pause",value:function(){null!==this.player&&this.player.pauseVideo()}},{key:"restartVideo",value:function(){this.__loadTime(0)}},{key:"isVideoPlaying",value:function(){return this.player.getPlayerState()==YT.PlayerState.PLAYING}},{key:"loadProgress",value:function(e){var t=this.player.getDuration();this.__loadTime(t*e)}},{key:"__loadTime",value:function(e){if(null!==this.player){this.player.seekTo(e,!0);var t=this.player.getCurrentTime();this.videoTimer.loadOffset(t-Math.floor(t)),this.notify(t)}}},{key:"setVolume",value:function(e){null!==this.player&&(e=(e=e>1?1:e)<0?0:e,this.player.setVolume(100*e))}},{key:"addYoutubeScript",value:function(e){this.iframeContainerID=e;var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("script")[0].appendChild(t),window.onYouTubeIframeAPIReady=this.__onYouTubeIframeAPIReady.bind(this)}},{key:"__onYouTubeIframeAPIReady",value:function(){var e=new YT.Player(this.iframeContainerID,{height:"360",width:"640",videoId:"bcqdgepq7ws",events:{onReady:this.__onPlayerReady.bind(this),onStateChange:this.__onPlayerStateChange.bind(this)},playerVars:{autoplay:0,controls:0,disablekb:1,fs:0,modestbranding:1,rel:0,iv_load_policy:3,autohide:1,wmode:"opaque",start:0}});this.player=e}},{key:"__onPlayerReady",value:function(e){document.querySelector("#"+this.iframeContainerID).style.pointerEvents="none",this.videoStateChanged(VideoManager.LOADED,{duration:this.player.getDuration()}),this.__loadTime(0)}},{key:"__onPlayerStateChange",value:function(e){e.data==YT.PlayerState.PLAYING?(this.videoStateChanged(VideoManager.PLAYING),this.videoTimer.play()):e.data==YT.PlayerState.PAUSED&&(this.videoStateChanged(VideoManager.PAUSED),this.videoTimer.pause())}},{key:"__timeHandler",value:function(){this.notify(this.player.getCurrentTime())}},{key:"currentTime",get:function(){return this.player.getCurrentTime()}}]),n}();